# Configuration file for SOMANET CIRCULO 7, Option FSoE, Safe Motion drive
vendor_id: 0x000022d2
product_id: 0x00000302
assign_activate: 0x0300 # DC Synch register
auto_fault_reset: false # true = automatic fault reset, false = fault reset on rising edge command interface "reset_fault"
#sdo: # sdo data to be transferred at drive startup
#  - { index: 0x60C2, sub_index: 1, type: int8, value: 10 } # Set interpolation time for cyclic modes to 10 ms
#  - { index: 0x60C2, sub_index: 2, type: int8, value: -3 } # Set base 10-3s
# Source: for communication area indices: https://doc.synapticon.com/circulo_safe_motion/sw5.1/object_dict/communication_area.html
rpdo: # RxPDO = receive PDO Mapping, master (out) to slave (in) (MOSI)
  # Source: https://doc.synapticon.com/circulo_safe_motion/sw5.1/object_dict/pdo/rxpdo.html
  - index: 0x1600
    channels:
      - {
          index: 0x6040,
          sub_index: 0,
          type: uint16,
          command_interface: control_word,
          state_interface: control_word,
          default: 0,
        } # Control word
      - {
          index: 0x6060,
          sub_index: 0,
          type: int8,
          command_interface: mode_of_operation,
          default: 8,
        } # Modes of operation. Modes are: position (8), velocity (9), effort (10) and homing (6)
      - {
          index: 0x6071,
          sub_index: 0,
          type: int16,
          command_interface: effort,
          default: 0,
        } # Target torque
      - {
          index: 0x607a,
          sub_index: 0,
          type: int32,
          command_interface: position,
          default: .nan,
          factor: 166886.053607527
        } # Target position
      - {
          index: 0x60ff,
          sub_index: 0,
          type: int32,
          command_interface: velocity,
          default: 0,
          factor: 9549.2965855
        } # Target velocity
      - { index: 0x60b2, sub_index: 0, type: int16, default: 0 } # Offset torque
      - { index: 0x2701, sub_index: 0, type: int32, default: 0 } # Tuning command
  - index: 0x1601
    channels:
      - { index: 0x60fe, sub_index: 1, type: uint32, default: 0 } # Physical outputs
      - { index: 0x60fe, sub_index: 2, type: uint32, default: 0 } # Bit mask for physical outputs
  - index: 0x1602
    channels:
      - { index: 0x2703, sub_index: 0, type: uint32, default: 0 } # User MOSI
      - { index: 0x60b1, sub_index: 0, type: int32, default: 0 } # Offset velocity

tpdo: # TxPDO = transmit PDO Mapping, slave (out) to master (in) (MISO)
  # Source: https://doc.synapticon.com/circulo_safe_motion/sw5.1/object_dict/pdo/txpdo.html
  - index: 0x1a00
    channels:
      - {
          index: 0x6041,
          sub_index: 0,
          type: uint16,
          state_interface: status_word,
        } # Status word
      - {
          index: 0x6061,
          sub_index: 0,
          type: int8,
          state_interface: mode_of_operation,
        } # Mode of operation display
      - { index: 0x6064, sub_index: 0, type: int32, state_interface: position, factor: 5.992112453e-06  } # Position actual value
      - { index: 0x606c, sub_index: 0, type: int32, state_interface: velocity, factor: 0.1047198e-03  } # Velocity actual value
      - { index: 0x6077, sub_index: 0, type: int16, state_interface: effort } # Torque actual value
  - index: 0x1a01
    channels:
      - {
          index: 0x2401,
          sub_index: 0,
          type: uint16,
          state_interface: analog_input_1,
        } # Analog input 1
      - {
          index: 0x2402,
          sub_index: 0,
          type: uint16,
          state_interface: analog_input_2,
        } # Analog input 2
      - {
          index: 0x2403,
          sub_index: 0,
          type: uint16,
          state_interface: analog_input_3,
        } # Analog input 3
      - {
          index: 0x2404,
          sub_index: 0,
          type: uint16,
          state_interface: analog_input_4,
        } # Analog input 4
      - { index: 0x2702, sub_index: 0, type: uint32 } # Tuning status
  - index: 0x1a02
    channels:
      - {
          index: 0x60fd,
          sub_index: 0,
          type: uint32,
          state_interface: digital_inputs_1,
        } # Digital inputs
  - index: 0x1a03
    channels:
      - { index: 0x2704, sub_index: 0, type: uint32 } # User MISO
      - { index: 0x20f0, sub_index: 0, type: uint32 } # Timestamp, unit Âµs
      - { index: 0x60fc, sub_index: 0, type: int32 } # Position demand internal value
      - { index: 0x606b, sub_index: 0, type: int32 } # Velocity demand value
      - { index: 0x6074, sub_index: 0, type: int16 } # Torque demand value

sm: # Sync Manager
  - { index: 0, type: output, watchdog: disable }
  - { index: 1, type: input, watchdog: disable }
  - { index: 2, type: output, pdo: rpdo, watchdog: enable }
  - { index: 3, type: input, pdo: tpdo, watchdog: disable }